<?xml version="1.0"?>
<!--
  Created by christoferdutz on 15.05.15.
-->
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        creationComplete="onCreationComplete(event)"
        title="{resourceManager.getString('dukecon', 'schedule.title')}">

  <fx:Metadata>
    [ResourceBundle("dukecon")]
  </fx:Metadata>

  <fx:Script>
    <![CDATA[
    import mx.collections.ArrayCollection;
    import mx.events.FlexEvent;

    import org.dukecon.controller.ConferenceController;
    import org.dukecon.events.ConferenceDataChangedEvent;
    import org.dukecon.events.ListEvent;

    [Bindable]
    protected var listData:ArrayCollection;

    protected function onCreationComplete(event:FlexEvent):void {
      ConferenceController.instance.addEventListener(
              ConferenceDataChangedEvent.CONFERENCE_DATA_CHANGED, onConferenceDataChanged);
      listData = ConferenceController.instance.days;
      list.addEventListener(ListEvent.ITEM_SELECTED, onDaySelected)
    }

    protected function onConferenceDataChanged(event:ConferenceDataChangedEvent):void {
      listData = ConferenceController.instance.days;
    }

    protected function onDaySelected(event:ListEvent):void {
      navigator.pushView(ScheduleDayView, event.data);
    }
    ]]>
  </fx:Script>

  <s:List id="list" width="100%" height="100%"
          itemRenderer="org.dukecon.itemrenderer.ScheduleDayItemRenderer"
          dataProvider="{listData}"/>

</s:View>
