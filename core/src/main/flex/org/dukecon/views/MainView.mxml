<?xml version="1.0"?>
<!--
  Created by christoferdutz on 19.05.15.
-->
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
        title="{resourceManager.getString('dukecon', 'main.title')}">

    <fx:Metadata>
        [ResourceBundle("dukecon")]
    </fx:Metadata>

    <fx:Script>
    <![CDATA[
        import org.dukecon.controller.ConferenceController;
        import org.dukecon.controller.OAuthControllerSimple;
        import org.dukecon.controller.UserPreferenceController;

        protected function onRefreshClicked(event:MouseEvent):void {
            ConferenceController.instance.updateTalks();
            if (OAuthControllerSimple.instance.isLoggedIn()) {
                UserPreferenceController.instance.readUserPreferences()
            }
        }

        protected function onLoginClicked(event:MouseEvent):void {
            navigator.pushView(OAuthViewSimple);
        }

        protected function onLogoutClicked(event:MouseEvent):void {
            OAuthControllerSimple.instance.logout();
        }
        ]]>
  </fx:Script>

    <s:VGroup id="content" width="100%" height="100%" horizontalAlign="center">
        <s:Image source="@Embed('/conference-logo.jpg')"
                 width="100%" height="100%" scaleMode="letterbox"/>
        <s:VGroup height="100%" verticalAlign="middle">
            <s:Button id="refreshButton" label="{resourceManager.getString('dukecon', 'main.refresh')}"
                      click="onRefreshClicked(event)"/>
            <s:Button id="loginButton" label="{resourceManager.getString('dukecon', 'main.login')}"
                      click="onLoginClicked(event)" visible="{OAuthControllerSimple.instance.oauthData == null}"/>
            <s:Button id="logoutButton" label="{resourceManager.getString('dukecon', 'main.logout')}"
                      click="onLogoutClicked(event)" visible="{OAuthControllerSimple.instance.oauthData != null}"/>
        </s:VGroup>
    </s:VGroup>

</s:View>
